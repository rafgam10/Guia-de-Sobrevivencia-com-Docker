
# Projeto: PHP + Apache com Docker Compose (exemplo simples)

Este projeto mostra **o uso mais básico e realista do Docker com PHP**, usando:
- PHP rodando no Apache
- Docker Compose
- um projeto simples, fácil de entender
- explicação passo a passo

É um ótimo primeiro contato para quem vem de PHP tradicional (XAMPP/LAMP).

---

## 1) Objetivo

Ao final deste projeto, você vai:
- rodar PHP no Apache usando Docker
- entender como funciona o container PHP + Apache
- usar Docker Compose
- acessar a aplicação pelo navegador
- entender a estrutura mínima de um projeto PHP dockerizado

---

## 2) Arquitetura do projeto

```

Navegador ───▶ Apache + PHP (container)

```

Tudo roda em **um único serviço**, de forma simples.

---

## 3) Estrutura do projeto

Crie a seguinte estrutura:

```

php-apache-docker/  
├── src/  
│ └── index.php  
├── docker-compose.yml  
└── .dockerignore

````

---

## 4) Código PHP (index.php)

Crie o arquivo `src/index.php`:

```php
<?php

echo "<h1>PHP rodando com Docker + Apache</h1>";
echo "<p>Projeto simples funcionando corretamente.</p>";

phpinfo();
````

Esse arquivo:

- imprime uma mensagem simples
- exibe informações do PHP (útil para testes)

---

## 5) Docker Compose (docker-compose.yml)

Aqui está o coração do projeto.

```yaml
services:
  web:
    image: php:8.3-apache
    ports:
      - "8080:80"
    volumes:
      - ./src:/var/www/html
```

### O que está acontecendo aqui

- `php:8.3-apache`  
    Imagem oficial com:
    
    - Apache
    - PHP já configurado

- `ports: "8080:80"`  
    Porta 8080 do host → porta 80 do Apache no container

- `volumes`  
    Mapeia a pasta `src` para o diretório padrão do Apache:

    ```
    /var/www/html
    ```


Isso permite:

- editar o PHP localmente
- ver mudanças no navegador sem rebuild

---

## 6) .dockerignore

Crie `.dockerignore`:

```txt
.git
.gitignore
.DS_Store
```

Evita enviar arquivos desnecessários para o Docker.

---

## 7) Subindo o projeto

Na raiz do projeto, execute:

```bash
docker compose up
```

Você verá logs parecidos com:

```txt
Apache/2.4.x (Debian) PHP/8.3.x configured
```

---

## 8) Acessando no navegador

Abra:

```
http://localhost:8080
```

Você deve ver:

- a mensagem do projeto
- a página do `phpinfo()`

Isso confirma que:

- Apache está rodando
- PHP está funcionando
- Docker está corretamente configurado

---

## 9) Testando mudanças em tempo real

Altere `index.php`:

```php
<?php
echo "<h1>Hello Docker!</h1>";
```

Atualize o navegador:

- a mudança aparece imediatamente
- não precisa rebuild
- bind mount funciona

---

## 10) Parando o projeto

No terminal:

```bash
Ctrl + C
```

Ou, em outro terminal:

```bash
docker compose down
```

---

## 11) O que você aprendeu até aqui

- Docker Compose pode rodar PHP + Apache facilmente
- Containers podem substituir XAMPP/LAMP
- Código PHP fica fora do container
- Apache já vem pronto na imagem oficial
- Setup é reproduzível em qualquer máquina

---

## 12) Erros comuns

- Porta 8080 já ocupada  
    Solução:
    
    ```yaml
    ports:
      - "8081:80"
    ```
    
- Arquivo não aparece  
    Verifique:
    
    - caminho do volume
    - pasta `src` existe
    - arquivo chama `index.php`

---

## 13) Próximo passo natural

A partir desse exemplo simples, você pode evoluir para:

- PHP + MySQL com Docker Compose
- uso de `.env`
- Apache + PHP com extensões
- PHP com Nginx + PHP-FPM
- projetos Laravel com Docker
